# Рабочие заметки по проекту

Этот файл содержит технические заметки и решения, принятые в ходе разработки.

## 2025-07-05

### Фаза 1: Настройка и базовая сцена

*   **Структура проекта:** Созданы папки `js`, `css` и файлы `index.html`, `css/style.css`, `js/main.js`.
*   **Babylon.js:** Подключен через CDN в `index.html`.
*   **Сцена:** Создана базовая сцена с камерой (`ArcRotateCamera`), освещением (`HemisphericLight`), землей (`Ground`) и простым объектом-сферой.

### Фаза 2: Управление

*   **Движение:** Реализовано управление сферой с помощью клавиш `W`, `A`, `S`, `D`.
    *   Логика реализована в `js/main.js` через `scene.onBeforeRenderObservable`.
    *   Используется `inputMap` для отслеживания состояния клавиш.
*   **Прыжок:** Реализован прыжок по нажатию на `Пробел`.
    *   Используется простая кастомная физика: переменные `jumpForce`, `gravity`, `verticalVelocity`.
    *   Прыжок возможен только с земли (`isOnGround`).

### Конфигурация (в `js/main.js`)

*   `playerSpeed = 0.3 * scaleFactor`
*   `jumpForce = 0.2 * scaleFactor`
*   `gravity = -0.015 * scaleFactor`
*   `scaleFactor = 10`

## 2025-01-XX

### Анализ проекта и документация

*   **Создан PROJECT_ANALYSIS.md:** Полный анализ текущего состояния проекта с техническими деталями и рекомендациями.
*   **Обновлен RULES.md:** Добавлены правила для ИИ-ассистента и информация о текущем состоянии проекта.
*   **Создан AI_CONTEXT.md:** Быстрый справочник для ИИ с ключевой информацией о проекте.
*   **Исправлена критическая ошибка:** Удалена дублированная кнопка "Toggle Fly Mode" в index.html.

### Выявленные проблемы

*   **Архитектура:** Монолитная структура кода требует рефакторинга на модули.
*   **Производительность:** Код оптимизирован, но может потребовать улучшений при добавлении новых функций.
*   **Масштабируемость:** Текущая структура затрудняет добавление сложных игровых механик.

### Рекомендации к следующим этапам

1. **Рефакторинг:** Разделить main.js на модули (Player, Camera, Physics, UI, World).
2. **Конфигурация:** Создать отдельный файл config.js для всех настроек.
3. **Анимации:** Добавить анимированную модель персонажа вместо сферы.
4. **Звук:** Реализовать аудио систему согласно TASKS.md.
5. **UI:** Улучшить пользовательский интерфейс и добавить HUD.
